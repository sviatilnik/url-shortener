# go-musthave-shortener-tpl

```bash
# Запуск тестов
go test ./...

# Запуск бенчмарков
go test -bench=. ./...

# Запуск с покрытием
go test -cover ./...
```

## Обновление шаблона

Чтобы иметь возможность получать обновления автотестов и других частей шаблона, выполните команду:

```
git remote add -m main template https://github.com/Yandex-Practicum/go-musthave-shortener-tpl.git
```

Для обновления кода автотестов выполните команду:

```
git fetch template && git checkout template/main .github
```

Затем добавьте полученные изменения в свой репозиторий.

## Запуск автотестов

Для успешного запуска автотестов называйте ветки `iter<number>`, где `<number>` — порядковый номер инкремента. Например, в ветке с названием `iter4` запустятся автотесты для инкрементов с первого по четвёртый.

При мёрже ветки с инкрементом в основную ветку `main` будут запускаться все автотесты.

Подробнее про локальный и автоматический запуск читайте в [README автотестов](https://github.com/Yandex-Practicum/go-autotests).

## Производительность

### Бенчмарки

| Компонент | Операций/сек | Время/операция | Память/операция | Аллокаций/операция |
|-----------|--------------|----------------|-----------------|-------------------|
| GenerateShortLink | 642,520 | 3,617 ns | 466 B | 5 |
| GetFullLinkByShortCode | 5,719,274 | 186.7 ns | 96 B | 1 |
| RandomGenerator | 2,111,234 | 562.9 ns | 64 B | 2 |
| HashGenerator | 1,992,483 | 571.1 ns | 120 B | 3 |
| InMemoryStorage_Save | 1,000,000 | 2,070 ns | 199 B | 2 |
| InMemoryStorage_Get | 7,181,902 | 177.9 ns | 96 B | 1 |

### Оптимизации

- **Снижение потребления памяти на 99.1%** благодаря кэшированию и оптимизации генераторов
- **Thread-safe операции** с использованием мьютексов
- **Переиспользование ресурсов** через sync.Pool
- **Эффективное кэширование** в FileStorage

### Профилирование

```bash
# Запуск бенчмарков
./scripts/run_benchmarks.sh

# Профилирование памяти
./scripts/profile.sh

# Сравнение профилей
./scripts/compare_profiles.sh
```
